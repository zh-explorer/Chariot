from ..util import Context
from ..db import ChallengeInst
from .exp_manager import exp_get


class ExploitScheduler:
    def __init__(self, inst_id, round):
        self.inst_id = inst_id
        self.round = round

        # get exp and sorted it
        session = Context.db.get_session()
        inst = session.query(ChallengeInst).filter(ChallengeInst.id == inst_id).one()
        self.challenge_name = inst.challenge.name
        self.team_name = inst_id.team.name
        session.commit()
        session.close()

        exps = exp_get(self.challenge_name)
        exps.sort()
        self.try_times = 0
        self.exp_index = 0

    def start(self):
        pass

    def task_update(self, log_id):
        pass

    def exp_modify(self, exp):
        pass

    def flag_submitted(self, flag_id):
        pass

    def stop(self):
        pass
